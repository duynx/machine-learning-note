# machine-learning-note
## Install tensorflow macos
### Required
homebrew, python, pip, virtualenv

<code>python3 -m pip install --upgrade https://storage.googleapis.com/tensorflow/mac/cpu/tensorflow-1.12.0-py3-none-any.whl </code>
## Create virtual env
### Create
<code>virtualenv --system-site-packages -p python3 ./venv
</code>
### Active env
<code>source ./venv/bin/activate</code>
### Exit env
<code>deactivate</code>

References : [https://www.tensorflow.org/install/pip?lang=python3]

## Create Virtual env from anaconda

<div class="section-inner sectionLayout--insetColumn"><h1 name="6538" id="6538" class="graf graf--h3 graf--leading graf--title">Anaconda, Jupyter Notebook, TensorFlow and Keras for Deep&nbsp;Learning</h1><p name="b94c" id="b94c" class="graf graf--p graf-after--h3">[Update: you no longer need to install Keras separately since it is part of the core TensorFlow API. “import tensorflow as tf” then use tf.keras in your code. You will notice the strikethrough of any mention of Keras installation in this blog post]</p><p name="6ff0" id="6ff0" class="graf graf--p graf-after--p">So you want to get started to study deep learning? The first step is to set up the tools. In this post I will share with you how to set up Anaconda and Jupyter Notebook, and then install TensorFlow (including Keras).</p><figure name="c214" id="c214" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 600px; max-height: 400px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 66.7%;"></div><div class="progressiveMedia js-progressiveMedia graf-image is-canvasLoaded is-imageLoaded" data-image-id="1*c4EsT8qTEur94V8ZsIN1xQ.png" data-width="600" data-height="400" data-scroll="native"><img src="https://cdn-images-1.medium.com/freeze/max/60/1*c4EsT8qTEur94V8ZsIN1xQ.png?q=20" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas" width="75" height="50"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/1600/1*c4EsT8qTEur94V8ZsIN1xQ.png" src="https://cdn-images-1.medium.com/max/1600/1*c4EsT8qTEur94V8ZsIN1xQ.png"><noscript class="js-progressiveMedia-inner">&lt;img class="progressiveMedia-noscript js-progressiveMedia-inner" src="https://cdn-images-1.medium.com/max/1600/1*c4EsT8qTEur94V8ZsIN1xQ.png"&gt;</noscript></div></div></figure><p name="8e22" id="8e22" class="graf graf--p graf-after--figure">There are different ways of installing TensorFlow:</p><ul class="postList"><li name="defc" id="defc" class="graf graf--li graf--startsWithDoubleQuote graf-after--p">“native” pip or install from source</li><li name="e453" id="e453" class="graf graf--li graf-after--li">install in a virtual environment with Virtualenv, Anaconda, or Docker. This post will be using Anaconda.</li></ul><p name="43da" id="43da" class="graf graf--p graf-after--li">While Jupyter Notebook is not a pre-requisite for using TensorFlow (or Keras), I find that using Jupyter Notebook very helpful for beginners who just started with machine learning or deep learning. I plan to use Jupyter Notebook for all the tutorials that I will be writing in order to share my deep learning knowledge.</p><p name="50d1" id="50d1" class="graf graf--p graf-after--p">There are other deep learning frameworks out there but my future tutorials will be mostly using TensorFlow and tf.keras.</p><p name="26e4" id="26e4" class="graf graf--p graf-after--p">Let’s get started -</p><h3 name="f0d1" id="f0d1" class="graf graf--h3 graf-after--p">Download Anaconda</h3><p name="22a6" id="22a6" class="graf graf--p graf-after--h3">Anaconda will enable you to create virtual environments and install packages needed for data science and deep learning. With virtual environments you can install specific package versions for a particular project or a tutorial without worrying about version conflicts.</p><p name="8390" id="8390" class="graf graf--p graf-after--p">Download Anaconda for your platform and choose the <strong class="markup--strong markup--p-strong">Python 3.6 version</strong>: <a href="https://www.anaconda.com/download/#macos" data-href="https://www.anaconda.com/download/#macos" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">https://www.anaconda.com/download</a></p><p name="4506" id="4506" class="graf graf--p graf-after--p">By downloading Anaconda, you get <strong class="markup--strong markup--p-strong">conda</strong>, <strong class="markup--strong markup--p-strong">Python</strong>, <strong class="markup--strong markup--p-strong">Jupyter Notebook</strong> and hundreds of other open source packages.</p><p name="237c" id="237c" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Conda </strong>is a package manager to manage virtual environment and install packages. Here are some helpful commands using conda:</p><pre name="7b81" id="7b81" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong"># update conda in your default environment </strong><br><em class="markup--em markup--pre-em">$ </em><code class="markup--code markup--pre-code"><em class="markup--em markup--pre-em">conda upgrade conda<br>$ conda upgrade --all</em></code></pre><pre name="621f" id="621f" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong"># create a new environment with conda</strong><br><em class="markup--em markup--pre-em">$ conda create -n [my-env-name]</em></pre><pre name="fd85" id="fd85" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong"># activate the environment you created</strong><br><em class="markup--em markup--pre-em">$ source activate [my-env-name]</em></pre><pre name="a35b" id="a35b" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong"># take a look at the environment you created</strong><br><em class="markup--em markup--pre-em">$ conda info<br>$ conda list</em></pre><pre name="5951" id="5951" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong"># install a package with conda and verify it's installed</strong><br><em class="markup--em markup--pre-em">$ conda install numpy<br>$ conda list</em></pre><pre name="ec4a" id="ec4a" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong"># take a look at the list of environments you currently have</strong><br><em class="markup--em markup--pre-em">$ conda info -e</em></pre><pre name="d2ce" id="d2ce" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong"># remove an environment</strong><br>$ conda env remove --name [my-env-name]</pre><p name="1257" id="1257" class="graf graf--p graf-after--pre">I highly recommend you download and print out the Anaconda cheatsheet here -</p><figure name="b861" id="b861" class="graf graf--figure graf--iframe graf-after--p"><div class="aspectRatioPlaceholder is-locked"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 130%;"></div><div class="iframeContainer"><iframe data-width="600" data-height="780" width="600" height="780" src="/media/55d492c78bec1c856927aff815265c3b?postId=b91f381405f8" data-media-id="55d492c78bec1c856927aff815265c3b" allowfullscreen="" frameborder="0"></iframe></div></div><figcaption class="imageCaption">Source — <a href="https://conda.io/docs/_downloads/conda-cheatsheet.pdf" data-href="https://conda.io/docs/_downloads/conda-cheatsheet.pdf" class="markup--anchor markup--figure-anchor" rel="nofollow noopener" target="_blank">https://conda.io/docs/_downloads/conda-cheatsheet.pdf</a></figcaption></figure><h4 name="ae19" id="ae19" class="graf graf--h4 graf-after--figure">Conda vs Pip&nbsp;install</h4><p name="2d7a" id="2d7a" class="graf graf--p graf-after--h4">You can use either <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">conda </em></strong>or <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">pip</em></strong> for installation in an virtual environment created with conda. They are both open source package managers. Here are some differences:</p><ul class="postList"><li name="5c08" id="5c08" class="graf graf--li graf-after--p"><code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">conda install</em></strong></code> — installs any software package.</li><li name="2ebd" id="2ebd" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">pip install</em></strong></code> — installs python packages only and it’s the defacto python package manager.</li></ul><p name="4130" id="4130" class="graf graf--p graf-after--li">Note: pip and conda use different packaging formats so they do not operate interchangeably.</p><blockquote name="79f6" id="79f6" class="graf graf--blockquote graf-after--p"><strong class="markup--strong markup--blockquote-strong">protip</strong>: use <code class="markup--code markup--blockquote-code"><strong class="markup--strong markup--blockquote-strong">conda list</strong></code> to see the list of packages installed and whether they are installed with conda or pip.</blockquote><h3 name="4e0b" id="4e0b" class="graf graf--h3 graf-after--blockquote">Install TensorFlow (including Keras)</h3><p name="76da" id="76da" class="graf graf--p graf-after--h3">Next we will install TenslowFlow in the virtual environment you created with conda. Note: we will be using <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">pip install</em></strong></code> instead of <code class="markup--code markup--p-code">conda install</code> per the <a href="https://www.tensorflow.org/install/install_mac" data-href="https://www.tensorflow.org/install/install_mac" class="markup--anchor markup--p-anchor" rel="noopener nofollow" target="_blank">TensorFlow official installation documentation</a>.</p><figure name="8080" id="8080" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 127px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 18.099999999999998%;"></div><div class="progressiveMedia js-progressiveMedia graf-image is-canvasLoaded is-imageLoaded" data-image-id="1*itaPLWgvm19jjSjoZbVwqQ.png" data-width="2410" data-height="436" data-action="zoom" data-action-value="1*itaPLWgvm19jjSjoZbVwqQ.png" data-scroll="native"><img src="https://cdn-images-1.medium.com/freeze/max/60/1*itaPLWgvm19jjSjoZbVwqQ.png?q=20" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas" width="75" height="12"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/1600/1*itaPLWgvm19jjSjoZbVwqQ.png" src="https://cdn-images-1.medium.com/max/1600/1*itaPLWgvm19jjSjoZbVwqQ.png"><noscript class="js-progressiveMedia-inner">&lt;img class="progressiveMedia-noscript js-progressiveMedia-inner" src="https://cdn-images-1.medium.com/max/1600/1*itaPLWgvm19jjSjoZbVwqQ.png"&gt;</noscript></div></div><figcaption class="imageCaption">Source: TensorFlow official install documentation for&nbsp;MacOS</figcaption></figure><p name="a453" id="a453" class="graf graf--p graf-after--figure">You can either install one package at a time or install several packages at once from a requirements.txt file.</p><pre name="5270" id="5270" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong"># install pip in the virtual environment</strong><br><em class="markup--em markup--pre-em">$ conda install pip</em></pre><pre name="07f6" id="07f6" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong"># install Tensorflow<br></strong>$<strong class="markup--strong markup--pre-strong"> </strong>pip install --upgrade tensorflow # for python 2.7<br>$ pip3 install --upgrade tensorflow # for python 3.*</pre><pre name="4483" id="4483" class="graf graf--pre graf-after--pre">#<strong class="markup--strong markup--pre-strong"> install Keras (Note: please install TensorFlow first)</strong><br>$ pip install Keras</pre><pre name="4966" id="4966" class="graf graf--pre graf-after--pre">#̵ ̵i̵n̵s̵t̵a̵l̵l̵ ̵K̵e̵r̵a̵s̵ ̵(̵N̵o̵t̵e̵:̵ ̵p̵l̵e̵a̵s̵e̵ ̵i̵n̵s̵t̵a̵l̵l̵ ̵T̵e̵n̵s̵o̵r̵F̵l̵o̵w̵ ̵f̵i̵r̵s̵t̵)̵<br>̵ $̵ ̵p̵i̵p̵ ̵i̵n̵s̵t̵a̵l̵l̵ ̵K̵e̵r̵a̵s̵</pre><pre name="0c57" id="0c57" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong"># Alternatively, install multiple packages from a requirements file</strong><br><em class="markup--em markup--pre-em">$ pip install -r requirements.txt</em></pre><p name="7e66" id="7e66" class="graf graf--p graf-after--pre">After installing TensorFlow you can verify its installation with python in command line:</p><p name="b1a7" id="b1a7" class="graf graf--p graf-after--p">Invoke python from your shell as follows:</p><pre name="ed11" id="ed11" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong"># invoke python from your shell</strong><br>$ python</pre><pre name="1ded" id="1ded" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong"># create a simple TensorFlow program inside the python interactive shell</strong><code class="markup--code markup--pre-code"><br>&gt;&gt;&gt; import tensorflow as tf<br>&gt;&gt;&gt; hello = tf.constant('Hello, TensorFlow!')<br>&gt;&gt;&gt; sess = tf.Session()<br>&gt;&gt;&gt; print(sess.run(hello))</code></pre><pre name="4f0f" id="4f0f" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong"># Exit the python shell</strong><br>Ctrl+D</pre><p name="5c37" id="5c37" class="graf graf--p graf-after--pre">If you see <code class="markup--code markup--p-code">Hello, TensorFlow!</code> printed then it confirms that TensorFlow is stalled correctly.</p><h3 name="a49f" id="a49f" class="graf graf--h3 graf-after--p">Launch Jupyter&nbsp;Notebook</h3><p name="86b7" id="86b7" class="graf graf--p graf-after--h3">Jupyter Notebook is a web application that contain both computer code such as Python and rich text elements such as paragraph, equations, figures, links, etc. It’s an essential tool for data analysis and visualization.</p><p name="4558" id="4558" class="graf graf--p graf-after--p">As I said earlier, you get Jupyter Notebook already by downloading Anaconda.</p><h4 name="05aa" id="05aa" class="graf graf--h4 graf-after--p"><strong class="markup--strong markup--h4-strong">Start/Stop Jupyter&nbsp;Notebook</strong></h4><p name="c9c9" id="c9c9" class="graf graf--p graf-after--h4">You will start / stop the Jupyter Notebook server from the command line:</p><pre name="2c74" id="2c74" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong"># launch the Jupyter Notebook server</strong><br>$ jupyter notebook</pre><pre name="d60a" id="d60a" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong"># stop the Jupter Notebook server</strong><br>Ctrl+C </pre><p name="124e" id="124e" class="graf graf--p graf-after--pre">Alternatively you can shut down individual notebooks from the Notebook server UI.</p><p name="3d69" id="3d69" class="graf graf--p graf-after--p">When opening your notebook, if you get a Kernel not found error, use the drop down (with virtual environments) to select and set a kernel.</p><h4 name="c020" id="c020" class="graf graf--h4 graf-after--p"><strong class="markup--strong markup--h4-strong">Running Jupyter Notebook with&nbsp;GPU</strong></h4><p name="88c0" id="88c0" class="graf graf--p graf-after--h4">When you just start out with deep learning with some Hello World examples, you can run your training on CPU. As you progress in your learning, most likely you will need to run your training on a GPU. Check out my post on how to set up Jupyter Notebook on <a href="https://goo.gl/6uBxi3" data-href="https://goo.gl/6uBxi3" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">Floydhub</a> or <a href="https://goo.gl/ncYRhM" data-href="https://goo.gl/ncYRhM" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">Amazon AWS</a>.</p><p name="1379" id="1379" class="graf graf--p graf-after--p">Here is an informative Jupyter Notebook blog including a cheat sheet -</p><div name="530a" id="530a" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://www.datacamp.com/community/blog/jupyter-notebook-cheat-sheet" data-href="https://www.datacamp.com/community/blog/jupyter-notebook-cheat-sheet" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://www.datacamp.com/community/blog/jupyter-notebook-cheat-sheet" rel="nofollow"><strong class="markup--strong markup--mixtapeEmbed-strong">Jupyter Notebook Cheat Sheet</strong><br><em class="markup--em markup--mixtapeEmbed-em">You'll probably know the Jupyter notebooks pretty well - it's one of the most well-known parts of the Jupyter…</em>www.datacamp.com</a><a href="https://www.datacamp.com/community/blog/jupyter-notebook-cheat-sheet" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="d91beeaa49c6a0a3711263fb14e2f394" data-thumbnail-img-id="0*Lv3wV-BI-60x59Yo." style="background-image: url(https://cdn-images-1.medium.com/fit/c/320/320/0*Lv3wV-BI-60x59Yo.);"></a></div><h4 name="2f28" id="2f28" class="graf graf--h4 graf-after--mixtapeEmbed">Verify Jupyter Notebook is&nbsp;working</h4><p name="7356" id="7356" class="graf graf--p graf-after--h4">Now that you have a conda virtual environment and installed the required packages, and launch Jupyter Notebook. Let’s verify everything is working.</p><p name="c91e" id="c91e" class="graf graf--p graf-after--p">Create a new Notebook and create a new cell with</p><pre name="8bee" id="8bee" class="graf graf--pre graf-after--p">import tensorflow as tf<br>print ("TensorFlow version: " + tf.__version__)</pre><pre name="de7f" id="de7f" class="graf graf--pre graf-after--pre"># Note you no longer need to import keras, use tf.keras instead<br>i̵m̵p̵o̵r̵t̵ ̵k̵e̵r̵a̵s̵</pre><p name="84ff" id="84ff" class="graf graf--p graf-after--pre">E̵x̵e̵c̵u̵t̵e̵ ̵t̵h̵e̵ ̵c̵e̵l̵l̵(̵s̵)̵,̵ ̵a̵n̵d̵ ̵y̵o̵u̵ ̵s̵h̵o̵u̵l̵d̵ ̵s̵e̵e̵ ̵t̵h̵e̵ ̵v̵e̵r̵s̵i̵o̵n̵ ̵o̵f̵ ̵T̵e̵n̵s̵o̵r̵F̵l̵o̵w̵ ̵a̵n̵d̵ ̵t̵h̵a̵t̵ ̵K̵e̵r̵a̵s̵ ̵i̵s̵ ̵u̵s̵i̵n̵g̵ ̵T̵e̵n̵s̵o̵r̵F̵l̵o̵w̵ ̵b̵a̵c̵k̵e̵n̵d̵.̵ You will only see “Using TensorFlow backend” if you explicitly import keras. Please use tf.keras instead.</p><figure name="6d86" id="6d86" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 133px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 19%;"></div><div class="progressiveMedia js-progressiveMedia graf-image is-canvasLoaded" data-image-id="1*OuYs-jKTvTV_4rq4arrSmw.png" data-width="1164" data-height="221" data-action="zoom" data-action-value="1*OuYs-jKTvTV_4rq4arrSmw.png" data-scroll="native"><img src="https://cdn-images-1.medium.com/freeze/max/60/1*OuYs-jKTvTV_4rq4arrSmw.png?q=20" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas" width="75" height="13"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/1600/1*OuYs-jKTvTV_4rq4arrSmw.png"><noscript class="js-progressiveMedia-inner">&lt;img class="progressiveMedia-noscript js-progressiveMedia-inner" src="https://cdn-images-1.medium.com/max/1600/1*OuYs-jKTvTV_4rq4arrSmw.png"&gt;</noscript></div></div></figure><p name="7af3" id="7af3" class="graf graf--p graf-after--figure">If you see an error in your notebook complaining about TensorFlow o̵r̵ ̵K̵e̵r̵a̵s̵<br>module not found, even though you already install it in your conda environment, <strong class="markup--strong markup--p-strong">make sure you are setting the right kernel</strong>.</p><blockquote name="d597" id="d597" class="graf graf--blockquote graf-after--p"><strong class="markup--strong markup--blockquote-strong">Protip: </strong>install nb_conda so that you can easily switch kernel in Jupyter Notebook (<code class="markup--code markup--blockquote-code">conda install nb_conda)</code></blockquote><h3 name="470b" id="470b" class="graf graf--h3 graf-after--blockquote">Summary</h3><p name="e666" id="e666" class="graf graf--p graf-after--h3">To summarize, here are the steps to take for setting up everything:</p><ul class="postList"><li name="add8" id="add8" class="graf graf--li graf-after--p">Download Anaconda</li><li name="132a" id="132a" class="graf graf--li graf-after--li">Create a virtual environment and activate it</li><li name="e4ae" id="e4ae" class="graf graf--li graf-after--li">Install K̵e̵r̵a̵s̵ ̵a̵n̵d̵ TensorFlow etc.</li><li name="7a98" id="7a98" class="graf graf--li graf-after--li">Launch Jupyter Notebook</li><li name="f502" id="f502" class="graf graf--li graf-after--li">Start writing some code!</li></ul><pre name="37b6" id="37b6" class="graf graf--pre graf-after--li"># create a new environment <br>$ conda create -n fashion-mnist-tutorial</pre><pre name="9753" id="9753" class="graf graf--pre graf-after--pre"># activate the environment you just created<br>$ source activate fashion-mnist-tutorial</pre><pre name="236c" id="236c" class="graf graf--pre graf-after--pre"># install pip <br>$ conda install pip</pre><pre name="88dd" id="88dd" class="graf graf--pre graf-after--pre"># install latest version of Tensorflow<br>$ pip install --upgrade tensorflow </pre><pre name="1b50" id="1b50" class="graf graf--pre graf-after--pre"># if you are prompted to upgrade pip<br>$ pip install --upgrade pip</pre><pre name="9702" id="9702" class="graf graf--pre graf-after--pre">#̵ ̵i̵n̵s̵t̵a̵l̵l̵ ̵t̵h̵e̵ ̵l̵a̵t̵e̵s̵t̵ ̵v̵e̵r̵s̵i̵o̵n̵ ̵o̵f̵ ̵K̵e̵r̵a̵s̵<br>̵$̵ ̵p̵i̵p̵ ̵i̵n̵s̵t̵a̵l̵l̵ ̵-̵-̵u̵p̵g̵r̵a̵d̵e̵ ̵k̵e̵r̵a̵s̵</pre><pre name="5b84" id="5b84" class="graf graf--pre graf-after--pre"># install nb_conda for easily managing/switching notebook kernel<br>$ conda install nb_conda</pre><pre name="b527" id="b527" class="graf graf--pre graf-after--pre graf--trailing"># launch Jupyter Notebook<br>$ jupyter notebook</pre></div>
